# **[프로젝트 2] : 알람시계**
[알람시계 Github] <br>
[알람시계 동작영상]

[알람시계 Github]: https://github.com/Lateaksoo/Microprocesser/tree/master/elevator#readme
[알람시계 동작영상]: https://www.youtube.com/watch?v=W6zqfcXDg6w

### **개요**
- ATMEGA 2560 을 이용한 알람시계
- 6개의 버튼으로 연월일, 시분초 설정 및 알람 시간 설정 가능
- 설정한 알람시간이 되면 buzzer에서 노래 재생



### **사용된 부품**
|부품명|사용 개수|사용 목적|
|---|---|---
|ATMEGA 2560 | 1 ||
|Push-Button   |6  |연월일 선택, 시분초 선택, 알람설정버튼,날짜모드,시간모드,
|LCD|1 |알람시계의 날짜 시간 표시
|Piezo Buzzer|1 | 알람 소리 재생
|가변저항 | 1| LCD 밝기 조절




### **개발 중 어려웠던 점**

 delay 함수를 사용하지 않고 구현하는 점이 어려웠다. millis 함수를 배우기 전 프로젝트여서 delay 없이 구현하기에 어려움이 있었다. delay를 사용하여 시간이 조금씩 느려지는 오류가 발생하였다. 후에 배우게 되는 Timer 모듈을 사용하거나 millis를 사용하면 좀 더 정교한 시계를 완성할 수 있었을 것이다. 
 년일때 2월의 날짜를 계산하는 것이 어려웠다. 이점은 구현을 하지 못했다.

**delay 함수를 사용한 모습** <br>
```c++
if(digitalRead(bt6)==HIGH){ //알람시계 부분 
  alramwatch();
  delay(100);
}
```

### **프로그램 주요 코드 설명**

실제 알람시계처럼 알람을 설정하는 동안에도 백그라운드에서 시간이 계속 가도록 구현하였다.

#### [버튼의 동작]
5번 버튼을 누르면 1,2,3버튼이 날짜를 조정하고 4번 버튼을 누르면 1,2,3 버튼이 시간을 조정한다.
```c++
int bt1=29; //초 +1 버튼 or 일+1
int bt2=30; //분 +1 버튼 or 월+1
int bt3=31; //시 +1 버튼 or 년+1
int bt4=32;//시간설정
int bt5=33;//날짜설정
int bt6=34;//알람설정
```

#### [알람시계 작동 부분]
시간을 증가시키는 부분이다. 
```c++
if(milli==10){
    s=s+1;
    milli=0;  
   }
  if (s == 60){  //초가 60초가되면 초기화 +1분 
    s=0; 
    b=b+1; 
  }
 
  if (b == 60){ //분이 60분이 되면 초기화 +1시 
    b=0; 
    h=h+1; 
  } 
  if(h==24) //시간이 24시가 되면 초기화 +1일 
  { 
    h=0; 
    b=0; 
    s=0; 
    d=d+1; 
  }if (s == 60){  //초가 60초가되면 초기화 +1분 
    s=0; 
    b=b+1; 
  }
 
  if (b == 60){ //분이 60분이 되면 초기화 +1시 
    b=0; 
    h=h+1; 
  } 
  if(h==24) //시간이 24시가 되면 초기화 +1일 
  { 
    h=0; 
    b=0; 
    s=0; 
    d=d+1; 
  }
```

#### [알람시계 부분]
설정한 알람시간과 현재 시간이 같다면 알람이 울리게 되고 알람시간을 초기화한다.
```c++
void ringring(){ //알람부분 
  if(ah==h && ab==b && as==s){ //설정시간과 현재시간이 같으면 알람이 울린다 
   
   lcd.clear();
   lcd.print("Wake Up!");
    for(int i=0;i<26;i++){
      watch();
      tone(buzzer,melody1[i],tempo);
      ah=0;
      ab=0;
      as=0;
    }
  }
}
```

